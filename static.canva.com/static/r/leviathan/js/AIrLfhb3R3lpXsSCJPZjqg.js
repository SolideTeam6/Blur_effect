(function() {var m,n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this,aa={};function p(a,b){(aa[a]=aa[a]||[]).push(b);var c=n;a=a.split(".");for(var d=0;d<a.length-1&&c;d++)c=c[a[d]];a=a[a.length-1];c&&c[a]instanceof Function&&(c[a]=b(c[a]))}
function q(){q=function(){};if(!n.Symbol){n.Symbol=ba;var a=[],b=function(b){return function(d){a=[];d=b(d);for(var e=[],f=0,g=d.length;f<g;f++){var h;a:if(h=d[f],14>h.length)h=!1;else{for(var l=0;14>l;l++)if(h[l]!="jscomp_symbol_"[l]){h=!1;break a}h=!0}h?a.push(d[f]):e.push(d[f])}return e}};p("Object.keys",b);p("Object.getOwnPropertyNames",b);p("Object.getOwnPropertySymbols",function(c){return function(d){b.Ub=Object.getOwnPropertyNames(d);a.push.apply(c(d));return a}})}}var ca=0;
function ba(a){return"jscomp_symbol_"+a+ca++}function r(){q();n.Symbol.iterator||(n.Symbol.iterator=n.Symbol("iterator"));r=function(){}}function t(a){r();q();r();var b=a[Symbol.iterator];if(b)return b.call(a);var c=0;return{next:function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}}function u(a){if(!(a instanceof Array)){a=t(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
function v(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}var da="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
function w(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function x(a,b){if(b){for(var c=n,d=a.split("."),e=0;e<d.length-1;e++){var f=d[e];f in c||(c[f]={});c=c[f]}d=d[d.length-1];e=c[d];b=b(e);if(b!=e){a=aa[a]||[];for(e=0;e<a.length;e++)b=a[e](b);da(c,d,{configurable:!0,writable:!0,value:b})}}}
x("WeakMap",function(a){function b(a){this.qa=(h+=Math.random()+1).toString();if(a){q();r();a=t(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(a){if(!w(a,f)){var b={};b[f]=g;da(a,f,{value:b})}}function d(a){return function(b){var c=a(b);if(w(b,f)&&w(b[f],f)&&b[f][f]===g)for(b=0;b<c.length;b++)if(c[b]==f){c.splice(b,1);break}return c}}function e(a){return function(b){c(b);return a(b)}}if(function(){if(!a||!Object.seal)return!1;var b=Object.seal({}),c=Object.seal({}),d=new a([[b,
2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}())return a;var f="$jscomp_hidden_"+Math.random().toString().substring(2),g={};p("Object.getOwnPropertyNames",d);p("Object.keys",d);p("Reflect.enumerate",d);p("Reflect.ownKeys",d);p("Object.freeze",e);p("Object.preventExtensions",e);p("Object.seal",e);var h=0;b.prototype.set=function(a,b){c(a);if(!w(a,f))throw Error("WeakMap key fail: "+a);a[f][this.qa]=b;return this};b.prototype.get=function(a){return w(a,
f)?a[f][this.qa]:void 0};b.prototype.has=function(a){return w(a,f)&&w(a[f],this.qa)};b.prototype.delete=function(a){return w(a,f)&&w(a[f],this.qa)?delete a[f][this.qa]:!1};return b});
x("Map",function(a){function b(){var a={};return a.previous=a.next=a.head=a}function c(a,b){var c=a.F,d={next:function(){if(c){for(;c.head!=a.F;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}}};d[Symbol.iterator]=function(){return d};return d}function d(a,b){var c;c=b&&typeof b;"object"==c||"function"==c?f.has(b)?c=f.get(b):(c=""+ ++g,f.set(b,c)):c="p_"+b;var d=a.ma[c];if(d&&w(a.ma,c))for(a=0;a<d.length;a++){var e=d[a];if(b!==b&&e.key!==
e.key||b===e.key)return{id:c,list:d,index:a,o:e}}return{id:c,list:d,index:-1,o:void 0}}function e(a){this.ma={};this.F=b();this.size=0;if(a){a=t(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}}if(function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(t([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;
e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(f){return!1}}())return a;q();r();var f=new WeakMap;e.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.ma[c.id]=[]);c.o?c.o.value=b:(c.o={next:this.F,previous:this.F.previous,head:this.F,key:a,value:b},c.list.push(c.o),this.F.previous.next=c.o,this.F.previous=c.o,this.size++);return this};e.prototype.delete=function(a){a=d(this,a);return a.o&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.ma[a.id],
a.o.previous.next=a.o.next,a.o.next.previous=a.o.previous,a.o.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.ma={};this.F=this.F.previous=b();this.size=0};e.prototype.has=function(a){return!!d(this,a).o};e.prototype.get=function(a){return(a=d(this,a).o)&&a.value};e.prototype.entries=function(){return c(this,function(a){return[a.key,a.value]})};e.prototype.keys=function(){return c(this,function(a){return a.key})};e.prototype.values=function(){return c(this,function(a){return a.value})};
e.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var g=0;return e});function ea(a,b){r();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}
x("Array.prototype.keys",function(a){return a?a:function(){return ea(this,function(a){return a})}});x("Array.prototype.values",function(a){return a?a:function(){return ea(this,function(a,c){return c})}});x("Object.assign",function(a){return a?a:function(a,c){for(var d=1;d<arguments.length;d++){var e=arguments[d];if(e)for(var f in e)w(e,f)&&(a[f]=e[f])}return a}});
x("Array.prototype.fill",function(a){return a?a:function(a,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});x("Array.prototype.entries",function(a){return a?a:function(){return ea(this,function(a,c){return[a,c]})}});
x("Array.prototype.find",function(a){return a?a:function(a,c){a:{var d=this;d instanceof String&&(d=String(d));for(var e=d.length,f=0;f<e;f++){var g=d[f];if(a.call(c,g,f,d)){a=g;break a}}a=void 0}return a}});function fa(){}function y(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];if(!a)throw Error(2>arguments.length?"invalid argument":ha.apply(fa,[].concat([b],u(d))));}
function ia(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];if(!a)throw Error(2>arguments.length?"invalid state":ha.apply(fa,[].concat([b],u(d))));}function z(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];if(null==a)throw Error(2>arguments.length?"argument is null":ha.apply(fa,[].concat([b],u(d))));return a}
function ha(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];var e=0;return a.replace(/\{}/g,function(){return e<c.length?c[e++]:"{}"})};function ja(){}ja.prototype.now=function(){return Date.now()};var la=new ja;var na=new ma;function ma(){}m=ma.prototype;m.setInterval=function(a,b){return window.setInterval(a,b)};m.clearInterval=function(a){window.clearInterval(a)};m.setTimeout=function(a,b){return window.setTimeout(a,b)};m.clearTimeout=function(a){window.clearTimeout(a)};m.requestAnimationFrame=function(a){return window.requestAnimationFrame(a)};m.cancelAnimationFrame=function(a){window.cancelAnimationFrame(a)};function oa(a){window.requestAnimationFrame(function(){window.requestAnimationFrame(a)})};function pa(){this.name="hd";this.defaultValue=0};function A(a){this.type=a}A.prototype.required=function(a,b){b=b[a];if(null==b||typeof b!=this.type)throw new TypeError("expected "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};A.prototype.optional=function(a,b){b=b[a];if(null!=b&&typeof b!=this.type)throw new TypeError("expected optional "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};
A.prototype.ub=function(a,b){b=b[a];if(null!=b)if(Array.isArray(b))for(a=0;a<b.length;a++)this.required(String(a),b);else throw new TypeError("expected repeated "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};var B=new A("string"),qa=new A("boolean"),C=new A("number");function ra(a){if(null==a||"object"!=typeof a)throw new TypeError("expected an object, found: "+a);return a}
function sa(a,b,c,d){d=d[c];if(null==d)return d;if("object"!==typeof d)throw new TypeError('expected map for property "'+c+'", found: '+JSON.stringify(d));for(var e=new Map,f=t(Object.keys(d)),g=f.next();!g.done;g=f.next())g=g.value,e.set(a(c,g),b(c,g,d));return e}function ta(a,b){return b}function ua(a,b,c){b=c[b];if("string"!==typeof b)throw new TypeError('expected string value in property "'+a+'", found: '+JSON.stringify(b));return b}function va(a){this.type=a}
va.prototype.required=function(a,b){if(null==b||typeof b!=this.type)throw new TypeError("expected "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};va.prototype.optional=function(a,b){if(null!=b){if(typeof b!=this.type)throw new TypeError("expected optional "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b}};
va.prototype.ub=function(a,b){if(Array.isArray(b)){if(0==b.length)return;for(var c=0;c<b.length;c++)this.required(a+"["+String(c)+"]",b[c])}else throw new TypeError("expected repeated "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};var D=new va("string");function wa(a){this.values=a||{}}wa.prototype.get=function(a){var b;if({}.hasOwnProperty.call(this.values,a.name)){b=this.values[a.name];var c=typeof b;a=typeof a.defaultValue;y(c===a,"Type mismatch: Configured value ({}) deviates from default value type ({})",c,a)}else b=a.defaultValue;return b};function xa(a){switch(a){case "USERNAME":return"USERNAME";case "EMAIL":return"EMAIL";case "FACEBOOK":return"FACEBOOK";case "GOOGLE":return"GOOGLE";default:throw new TypeError('expected CredentialsType for property "type", found: '+JSON.stringify(a));}}function ya(a){this.type=a.type;this.O=a.O}ya.prototype.getToken=function(){return this.O};function za(a){return{type:D.required("type",xa(a.type)),token:D.required("token",a.O)}}
function Aa(a){this.version=a.version;this.sizes=a.sizes||new Map;this.status=a.status}Aa.prototype.getVersion=function(){return this.version};function Ba(a){this.size=a.size;this.width=a.width;this.height=a.height;this.url=a.url};var Ca={version:0,sizes:{50:{size:50,width:50,height:50,url:"https://static.canva.com/static/images/default_avatar_50.png"},200:{size:200,width:200,height:200,url:"https://static.canva.com/static/images/default_avatar_200.png"}}},Da=C.optional("version",Ca)||0,Ea=sa(ta,function(a,b,c,d){c=d[c];if(null==c||"object"!==typeof c)throw new TypeError('expected object value in property "'+b+'", found: '+JSON.stringify(c));return a(c)}.bind(null,function(a){return new Ba({size:C.optional("size",a)||0,width:C.optional("width",a)||0,height:C.optional("height",
a)||0,url:B.required("url",a)})}),"sizes",Ca),Fa;function Ga(){var a=Ha;switch(a){case "PENDING":return"PENDING";case "SUCCEEDED":return"SUCCEEDED";case "FAILED":return"FAILED";default:throw new TypeError('expected AvatarBundleStatus for property "status", found: '+JSON.stringify(a));}}var Ha=B.optional("status",Ca);Fa=null!=Ha?Ga():Ha;new Aa({version:Da,sizes:Ea,status:Fa});function E(a){this.na=a.na;this.oa=a.oa;this.user=a.user;this.W=a.W;this.ia=a.ia;this.Y=a.Y;this.ka=a.ka;this.Z=a.Z}function Ia(a){var b=B.required("experience",a),c=sa(ta,ua,"experiments",a)||new Map,d=B.optional("user",a)||null,e=B.optional("brand",a)||null,f=qa.optional("personal",a)||null,g;g=C.optional("cohort",a);return new E({na:b,oa:c,user:d,W:e,ia:f,Y:g||null,ka:B.optional("tier",a)||null,Z:B.optional("countryCode",a)||null})};function F(a,b){this.config=a;this.lb=null;this.fa=[];this.ready=!1;this.ga=b}function Ja(a,b){var c=Object.assign({},b);a.lb&&(c.design=a.lb);c.experience=a.config.na;a.config.oa.forEach(function(a,b){c["Experiment:"+b]=a});a.config.W&&(c.brand=a.config.W);null!=a.config.ia&&(c.personal=a.config.ia);null!=a.config.Y&&(c.cohort=a.config.Y);a.config.ka&&(c.tier=a.config.ka);null!=a.config.Z&&(c.country_code=a.config.Z);Ka(c);return c}
function Ka(a){try{var b=window.crypto||window.msCrypto,c=new Uint8Array(16);b.getRandomValues(c);a.insert_id=btoa(String.fromCharCode.apply(null,c))}catch(d){}}function La(a,b){null==a.fa?b.call(a):a.fa.push(b.bind(a))}
function Ma(a,b){var c=window.lastUserTraits||G(new H),d=I(new H,"__user",a);a=a!==c.get("__user");if(b&&Na(b)){for(var e=t(b),f=e.next();!f.done;f=e.next()){var g=t(f.value),f=g.next().value,g=g.next().value;a=a||g!==c.get(f)}c=t(b.keys());for(e=c.next();!e.done;e=c.next())e=e.value,I(d,e,b.get(e))}a&&(window.lastUserTraits=G(d));return a}
function Oa(a,b){var c=window.lastUserTraits||G(new H);a=I(new H,"__user",a);if(c&&Na(c))for(var d=t(c.keys()),e=d.next();!e.done;e=d.next())e=e.value,"__user"!==e&&I(a,e,c.get(e));if(b&&Na(b))for(c=t(b.keys()),e=c.next();!e.done;e=c.next())d=e.value,I(a,d,b.get(d));window.lastUserTraits=G(a)}function Na(a){y(a instanceof Map,"Could not convert traits to an object; traits value not considered a Map instance");return!0}
function Pa(a,b,c,d){var e={};e.type=b;e.section="signup_form";e.subsection=c;e.location="logged_out_homepage";d&&Object.assign(e,d);a.track("button_click",e)}F.prototype.zoom=function(a,b,c,d,e){this.track("zoom",{type:a,section:b,subsection:c,location:d,value:e})};function J(a,b){a.track(b.name,b.Xa)}function K(a){this.name=a;this.Xa={}}function Qa(a,b){if(a.Xa.alert_message)throw Error("duplicated property");a.Xa.alert_message=b;return a}function H(){this.items=[]}
function I(a,b,c){a.items.push({key:b,value:c});return a}function G(a){return new Map(a.items.map(function(a){return[a.key,a.value]}))};function Ra(a){E.call(this,a)}v(Ra,E);function Sa(a,b){F.call(this,a,b);this.la=null}v(Sa,F);function Ta(a){return new Sa(a,function(a,c,d){window.console.log("Google track: ",a,c,d)})}m=Sa.prototype;m.track=function(a,b){window.console.log("analytics:track",this.la,a,Ja(this,b));return P.resolve()};m.identify=function(a,b,c){this.la=a;Ma(a,b)&&(Oa(a,b),window.console.log("analytics:identify",a,b,c));return P.resolve()};m.Ma=function(){window.console.log("analytics:getAnonymousUserId");return P.resolve("")};
m.alias=function(a){window.console.log("analytics:alias",this.la,a);this.la=a};m.set=function(a){window.console.log("analytics:set",this.la,a);return P.resolve()};m.union=function(a){window.console.log("analytics:union",this.la,a)};function Ua(a){E.call(this,a);this.O=a.O}v(Ua,E);function Va(a){var b=Ia(a);return new Ua({na:b.na,oa:b.oa,user:b.user,W:b.W,ia:b.ia,Y:b.Y,ka:b.ka,O:B.required("segmentWriteKey",a),Z:b.Z})};function Wa(a,b,c){F.call(this,a,c);this.ta=b;this.readyState="PENDING";this.Eb=3E4;this.ca=this.ya=null}v(Wa,F);
function Xa(a,b){var c=L(),d=new Wa(a,na,b);N(d).then(function(){for(d.ready=!0;d.fa&&0<d.fa.length;)d.fa.shift()();d.fa=null}).catch(function(){});window.segmentAnalyticsLoaded||(window.segmentAnalyticsLoaded=!0,N(d).then(function(){var b={path:location.pathname,url:location.href};L().page(b,{integrations:{Leanplum:!1}});a.user||(b=window.Appcues||null)&&b.anonymous();b=(new UAParser).getResult();G(I(I(new H,"Most recent browser",b.browser.name+" "+b.browser.version),"timezone",(new Date).getTimezoneOffset()/
-60))}).catch(function(){}),c.load(a.O));return d}function L(){ia("undefined"!==typeof window.analytics,"SegmentAnalytics: window['analytics'] not available");return window.analytics}m=Wa.prototype;m.track=function(a,b){var c=this;return N(this).then(function(d){return new P(function(e){d.track(a,Ja(c,b),{integrations:{Leanplum:!1}},e)})}).catch(function(){})};
m.identify=function(a,b,c){var d=this;return N(this).then(function(e){if(!Ma(a,b))return d.ya||P.resolve();d.ya=new P(function(f){Oa(a,b);e.identify(a,Ya(b),c,function(){d.ya=null;f()})});return d.ya}).catch(function(){})};m.Ma=function(){return N(this).then(function(a){return a.user().anonymousId()}).catch(function(){})};m.alias=function(a){N(this).then(function(b){return b.alias(a)}).catch(function(){})};
m.set=function(a){return N(this).then(function(b){return new P(function(c){return b.identify(Ya(a),c)})}).catch(function(){})};m.union=function(){};function Ya(a){var b={};if(a&&Na(a)){a=t(a);for(var c=a.next();!c.done;c=a.next()){var d=t(c.value),c=d.next().value,d=d.next().value;b[c]=d}}return b}
function N(a){var b=L();if(null!==a.ca)return a.ca;if("SUCCESS"===a.readyState)return P.resolve(b);if("FAILURE"===a.readyState)return P.reject(Error("Segment initialization failed"));a.ca=new P(function(c,d){var e=a.ta.setTimeout(function(){a.readyState="FAILURE";a.ca=null;d(Error("Segment initialization failed"))},a.Eb);b.ready(function(){"FAILURE"!==a.readyState&&(a.ta.clearTimeout(e),a.readyState="SUCCESS",a.ca=null,c(L()))})});return a.ca};function Za(a,b){L();if(a instanceof Ra)b=Ta(a);else if(a instanceof Ua)b=Xa(a,b);else throw Error("Invalid analytics config");a.user&&b.identify(a.user,null);return b}function $a(){var a=ra(window.analyticsConfig),b=B.required("impl",a),c=window.ga||function(){};switch(b){case "console":return Za(new Ra(Ia(a)),c);case "segment":return Za(Va(a),c);default:throw Error('No such analytics type: "'+b+'"');}};function ab(){this.xhr=null}ab.prototype.cancel=function(){this.xhr&&(this.xhr.abort(),this.xhr=null)};ab.prototype.finish=function(){this.xhr=null};function bb(a){this.eb=a&&a.analyticsContext||null;this.Ga=a&&a.authToken||null;this.Ia=a&&a.authzToken||null;this.gb=a&&a.brandRestriction||null;this.hb=a&&a.buildName||null;this.ib=a&&a.buildSha||null;this.aa=a&&a.csrfTokens||{};this.Za=a&&a.serverRoot||null;this.Gb=!!this.Za;this.Hb=this.Za?this.Za+"/_ajax":"/_ajax"}
function cb(a){var b=a.indexOf("/",1);return-1==b?a:a.substring(0,b)}bb.prototype.get=function(a,b){var c=new ab;this.send("GET",a,null,!0,null,c,b);return c};bb.prototype.post=function(a,b,c){var d=new ab;db(this,"POST",a,b,!0,0,d,c);return d};function eb(a,b,c){var d;return(new P(function(e,f){d=a.post(b,c,function(a,b){200<=a&&300>a?e([b,a]):f([b,a])})})).cancellable().catch(P.CancellationError,function(a){d.cancel();throw a;})}
function db(a,b,c,d,e,f,g,h){var l=cb(c);if(l in a.aa){var k=a.aa[l];a.send(b,c,d,e,k,g,function(M,ka){418==M&&1>f?(a.aa[l]==k&&delete a.aa[l],db(a,b,c,d,e,f+1,g,h)):(h&&h(M,ka),g.finish())})}else a.send("GET","/csrf"+l,null,e,null,g,function(k,ka){200==k?(l in a.aa||(a.aa[l]=String(ka)),db(a,b,c,d,e,f,g,h)):(h(k,null),g.finish())})}
bb.prototype.send=function(a,b,c,d,e,f,g){function h(){4==k.readyState&&l()}function l(){var a,b,c;try{a=k.status;var d,e;try{d=k.getResponseHeader("X-Canva-Auth")}catch(h){}try{e=k.getResponseHeader("X-Canva-Authz")}catch(h){}d&&(M.Ga="!"!=d?d:null);e&&(M.Ia="!"!=e?e:null);b=k.responseText}catch(h){if(h.message&&h.message.match(/c00c023f/))a=0,b="";else throw f.finish(),h;}b=b&&b.trim?b.trim():"";d=b.substring(0,20);if(0<d.length){if("'\"])}while(1);\x3c/x\x3e//"!=d){g(500,null);f.finish();return}b=
b.substring(20);try{c=JSON.parse(b)}catch(h){g(500,null);f.finish();return}}else c=null;g(a,c);f.finish()}b=this.Hb+b;var k=f.xhr=new XMLHttpRequest,M=this;k.open(a,b,d);this.Gb&&(k.withCredentials=!0);"GET"!=a&&e&&k.setRequestHeader("X-Csrf-Token",e);this.eb&&k.setRequestHeader("X-Canva-Analytics",this.eb);this.Ga&&k.setRequestHeader("X-Canva-Auth",this.Ga);this.Ia&&k.setRequestHeader("X-Canva-Authz",this.Ia);this.gb&&k.setRequestHeader("X-Canva-Brand",this.gb);this.hb&&k.setRequestHeader("X-Canva-Build-Name",
this.hb);this.ib&&k.setRequestHeader("X-Canva-Build-Sha",this.ib);null===c||void 0===c?a=null:(k.setRequestHeader("Content-Type","application/json;charset\x3dUTF-8"),a=JSON.stringify(c));d?(k.onreadystatechange=h,k.send(a)):(k.send(a),l())};function O(a){this.Ab=a.fallback;this.sb=a.localePrecedence;this.Va={};this.za=a.messages;this.Db=this.sb[0];this.Fb=!!a.returnKeys}O.prototype.format=function(a,b){if(this.Fb)return[].join.call(arguments,":");var c=fb(this,a);return c.format.call(c,[].slice.call(arguments,1))};
function fb(a,b){if(a.Va.hasOwnProperty(b))return a.Va[b];var c=a.Db,d;a.sb.some(function(c){d=a.za[c]&&a.za[c][b];return void 0!==d});d||(c=a.Ab,d=a.za[c]&&a.za[c][b]);if(!d)throw Error("Unknown message: "+b);c=new IntlMessageFormat(d,c,gb);return a.Va[b]=c}var gb={number:{currency:{style:"currency",currency:"USD"},integer:{maximumFractionDigits:0},fixed2:{minimumFractionDigits:2,maximumFractionDigits:2}}};function hb(){this.config=window.cmsg;this.g=this.i=null}function ib(a){a.i||(a.i=new jb(a.config));return a.i}function jb(a){O.apply(this,arguments)}v(jb,O);function kb(a){O.apply(this,arguments)}v(kb,O);function Q(a){return a.format("passwordStrengthFeedbackMessage4")}function lb(a){return a.format("passwordStrengthFeedbackMessage7")}function mb(a){return a.format("passwordStrengthFeedbackMessage11")}function nb(a){return a.format("passwordStrengthFeedbackMessage12")}
function ob(a){return a.format("passwordStrengthFeedbackMessage13")};function pb(){}v(pb,Error);function qb(){}v(qb,pb);function rb(){}v(rb,pb);function sb(a,b,c,d,e,f,g,h,l){this.accessToken=a;this.email=b;this.ob=c;this.id=d;this.qb=e;this.name=f;this.permissions=g;this.tb=h;this.vb=l}sb.prototype.Na=function(){return this.email};sb.prototype.getName=function(){return this.name};function tb(a){this.error=a.error;this.redirect=a.redirect;this.wb=a.wb}tb.prototype.getError=function(){return this.error};function ub(a){var b=B.optional("error",a),c=B.optional("redirect",a);a=qa.optional("userReactivated",a)||!1;return new tb({error:b,redirect:c,wb:a})};function vb(a){this.G=a;this.path="/login"}function wb(a,b){return eb(a.G,a.path+"/facebook",za(b)).get(0).then(ra).then(ub)};function R(a){this.G=a.G;this.Ua=a.Ua;this.Ea=a.config.Ea;this.J=null}
var xb={D:function(a,b){var c=[];b.permissions.data.forEach(function(a){"granted"==a.status&&c.push(a.permission)});this.permissions=c},param:"permissions"},yb={Jb:{D:function(a){this.accessToken=a.accessToken}},Kb:{D:function(a,b){this.email=b.email},param:"email"},Mb:{D:function(a,b){this.ob=b.first_name},param:"first_name"},Nb:{D:function(a){this.id=a.userID}},Ob:{D:function(a,b){this.qb=b.last_name},param:"last_name"},Pb:{D:function(a,b){this.name=b.name},param:"name"},Qb:xb,Rb:{D:function(a,
b){this.tb=b.picture.data.url},param:"picture.type(large)"},Lb:{D:function(a){this.vb=(new Date).getTime()+1E3*a.expiresIn}}};R.prototype.init=function(){var a=this,b,c;b=this;return(c=window.facebookSdkPromise)?c:c=window.facebookSdkPromise=new P(function(c,e){a.Ya=function(b){zb(a);e(b)};window.fbAsyncInit=function(){FB.init({version:"v2.6",appId:b.Ea,channelUrl:"//"+window.location.hostname+"/static/channel.html",status:!0,xfbml:!1});zb(a);c(a)};Ab(a)})};R.prototype.Ya=function(){zb(this)};
function zb(a){document.getElementById("facebook-jssdk").removeEventListener("error",a.Ya)}function Ab(a){var b,c=document.getElementsByTagName("script")[0];document.getElementById("facebook-jssdk")||(b=document.createElement("script"),b.id="facebook-jssdk",b.src="//connect.facebook.com/en_US/sdk.js",b.addEventListener("error",a.Ya),c.parentNode.insertBefore(b,c))}
R.prototype.Fa=function(a){return wb(this.Ua,new ya({type:"FACEBOOK",O:a.accessToken})).catch(function(a){if(Array.isArray(a)&&404===a[1])throw new rb;throw new qb;})};function Bb(a){return a.getAuthResponse().then(function(b){return a.Fa(b)})}function Cb(a,b){return new P(function(c,d){Db(a,[xb]).then(function(e){e=e.permissions;var f=_.difference(b,e);a.J&&(a.J.permissions=e);f.length?d():c()}).catch(d)})}
function Eb(a){return new P(function(b,c){var d;d=Object.keys(yb).map(function(a){return yb[a]});Db(a,d).then(function(d){d.email?(a.J=new sb(d.accessToken,d.email,d.ob,d.id,d.qb,d.name,d.permissions,d.tb,d.vb),b(a.J)):c("EMAIL_NOT_VERIFIED")}).catch(c)})}
function Db(a,b){return new P(function(c,d){a.getAuthResponse().then(function(a){for(var f=[],g=0;g<b.length;g++){var h=b[g];h.param&&f.push(h.param)}f=f.join(",");FB.api("/me?return_ssl_resources\x3d1\x26fields\x3d"+encodeURIComponent(f),function(f){if("error"in f)d("FB_API_ERROR");else{for(var g={},h=0;h<b.length;h++)b[h].D.call(g,a,f);c(g)}})}).catch(function(b){a.J=null;d(b)})})}
R.prototype.getAuthResponse=function(){return new P(function(a,b){FB.getAuthResponse()?a(FB.getAuthResponse()):FB.getLoginStatus(function(c){"connected"==c.status?a(c.authResponse):b("UNAUTHORIZED")})})};
function Fb(a){var b=["email","public_profile"];return new P(function(c,d){function e(b){a.J=null;d(b)}function f(f){f.authResponse&&f.status?Cb(a,b).then(c).catch(e):d("FB_API_ERROR")}var g=_.difference(b,a.J?a.J.permissions:[]);0<g.length?FB.login(f,{scope:g.join(",")}):Cb(a,b).then(c).catch(e)})}function Gb(){this.Ea=B.required("appId",window.facebookConfig)};function S(){}v(S,Error);function Hb(a,b){if(b instanceof T)return a.format("authGoogleSignInFailed");if(b instanceof Ib)return a.format("authGoogleFailedToFetchUserInformation");if(b instanceof Jb)return a.format("authTrySigningUpFirst");if(b instanceof Kb)return a.format("authGoogleSignInFailed");throw Error("unrecognised GoogleServiceError");}function T(){}v(T,S);function Ib(){}v(Ib,S);function Jb(){}v(Jb,S);function Kb(){}v(Kb,S);function Lb(a,b,c){this.name=a||null;this.picture=b||null;this.email=c||null}Lb.prototype.getName=function(){return this.name};Lb.prototype.Na=function(){return this.email};function U(a){this.accessToken=a.accessToken||null;this.Ka=a.Ka;this.u=a.u||null;this.C=a.C;this.w=a.w;this.ea=a.ea;this.Ca=null;this.state=a.state;if(this.accessToken){var b=this;this.Ta().then(function(){gapi.auth.setToken({accessToken:b.accessToken})})}if(this.ea&&!a.u)throw Error("Client cannot be configured with offline and not have a redirectUri");}U.prototype.load=function(){return this.Ta()};function Mb(a){return new P(function(b,c){$.getJSON(a).done(b).fail(c)})}
function Nb(a){function b(){return e.Ka("https://www.googleapis.com/oauth2/v1/userinfo?alt\x3djson\x26access_token\x3d"+encodeURIComponent(e.accessToken))}function c(){throw new Ib;}function d(a){e.Ca=a?$.extend(new Lb,{name:a.name,picture:a.picture,email:a.email}):null;return e.Ca}var e=a;if(0>a.w.indexOf("profile"))throw Error("API was not configured with USER_PROFILE_READ scope");return a.Ca?P.resolve(a.Ca):a.Ta().then(a.fb.bind(a,{xb:!0,state:a.state})).then(b).then(d).catch(c)}
function Ob(){var a={},b=new P(function(b,d){a.resolve=b;a.reject=d});a.promise=b;return a}
(function(){function a(a){var c;try{c=JSON.parse(a.data)}catch(d){return}c.f&&null===document.getElementById(c.f)&&a.stopImmediatePropagation()}window.googleApiLoaderDeferred=window.googleApiLoaderDeferred||Ob();window.googleApiLoaderScript=window.googleApiLoaderScript||null;U.prototype.zb=function(){var a=window.googleApiLoaderDeferred,c=$("\x3cscript\x3e");c[0].onerror=a.reject;c.attr({src:"https://apis.google.com/js/client.js?onload\x3dGoogleApiOnGapiLoad",type:"text/javascript"});c.appendTo("head");
return c};U.prototype.Ta=function(){window.googleApiLoaderScript||(window.addEventListener("message",a),window.googleApiLoaderScript=this.zb());return window.googleApiLoaderDeferred.promise};window.GoogleApiOnGapiLoad=function(){window.googleApiLoaderDeferred.resolve()}})();U.prototype.Ha=function(a){return this.fb({xb:!0,La:a&&a.La,state:this.state})};
U.prototype.fb=function(a){var b=this;if(this.accessToken)return P.resolve(this.accessToken);var c={client_id:this.C,immediate:!a.xb,approval_prompt:a.La?"force":"auto",access_type:this.ea?"offline":"online",response_type:this.ea?"code":"token",scope:this.w,state:this.state};this.ea&&(c=$.extend({redirect_uri:this.u},c));return new P(function(a,e){gapi.auth.authorize(c,function(c){var g=c&&c.access_token;c=c&&c.code;g?(b.accessToken=g,a(b.accessToken)):c?a(c):e(new Kb)})})};function Pb(a,b){this.Ja=a;this.namespace=void 0===b?null:b}Pb.prototype.setItem=function(a,b){try{return this.Ja.setItem(null==this.namespace?a:this.namespace+"."+a,b),!0}catch(c){return!1}};Pb.prototype.getItem=function(a){return this.Ja.getItem(null==this.namespace?a:this.namespace+"."+a)};Pb.prototype.removeItem=function(a){this.Ja.removeItem(null==this.namespace?a:this.namespace+"."+a)};function Qb(a){this.C=a.config.C;this.u=a.config.u;this.sa=a.config.sa;this.w=["profile","email"];this.google=Rb(this);this.G=a.G;this.X=a.X;this.Cb=3;this.wa=null;this.ja=this.ja.bind(this);this.Ba=this.Ba.bind(this)}function Rb(a,b){b=new U({accessToken:b,C:a.C,Ka:Mb,ea:!0,u:a.u,w:a.w,state:a.sa});a.google=b;return a.google}m=Qb.prototype;m.load=function(){return this.google.load()};function Sb(){var a,b,c=new P(function(c,e){a=c;b=e});return{resolve:a,reject:b,promise:c}}
m.Ha=function(){var a=this;this.wa=Sb();window.GoogleAuthMessageCallback&&window.removeEventListener("message",window.GoogleAuthMessageCallback);window.addEventListener("message",this.ja,!1);window.GoogleAuthMessageCallback=this.ja;window.canvaGoogleAuthReceiveMessage=this.Ba;this.google.Ha({La:!Tb(this)}).then(function(b){return Ub(a,b)}).catch(function(b){return Vb(a,b)});return this.wa.promise};function Vb(a,b){a.wa.reject(b);Wb(a)}
function Wb(a){window.removeEventListener("message",a.ja);window.canvaGoogleAuthReceiveMessage===a.ja&&(window.canvaGoogleAuthReceiveMessage=null)}m.ja=function(a){a.origin===window.location.origin&&this.Ba(a.data)};m.Ba=function(a){var b;try{b=JSON.parse(a)}catch(d){return}a=b.code;var c=b.error;if(b=b.state)this.google.state=b;c?Vb(this,new T):a&&Ub(this,a)};
function Ub(a,b){function c(a){Nb(Rb(f,a.accessToken)).then(function(b){var c=a.H||Tb(f);if(!c)throw new S;f.X&&f.X.setItem("GoogleAuthRefreshTokenKey",c);var d=f;d.wa.resolve(new Xb({email:b.Na(),H:c,accessToken:a.accessToken}));Wb(d)}).catch(function(){return Vb(f,new Ib)})}function d(a){429==a&&h<f.Cb?setTimeout(function(){e(g).spread(c,d)},1E3):Vb(f,new T)}function e(a){h++;return eb(f.G,"/google/requesttokens",Yb(a)).spread(Zb)}var f=a,g=new $b({code:b,Ra:"authorization_code",u:f.u,w:f.w}),h=
0;e(g).then(c,d)}m.Fa=function(a){var b=this;return new P(function(c,d){b.G.post("/login/google",ac(a),function(a,b){switch(a){case 200:c(new bc({redirect:B.required("redirect",b)}));break;case 404:d(new Jb);break;default:d(new T)}})})};function Tb(a){return a.X&&a.X.getItem("GoogleAuthRefreshTokenKey")}function cc(a){this.C=a.C;this.u=a.u;this.sa=a.sa}function dc(){var a=window.googleConfig;return new cc({C:B.required("clientId",a),u:B.required("redirectUri",a),sa:B.optional("oauthState",a)})}
function $b(a){this.code=a.code;this.Ra=a.Ra;this.u=a.u;this.w=a.w}function Yb(a){var b=D.required("code",a.code),c=D.required("grantType",a.Ra),d=D.required("redirectUri",a.u);a=D.ub("scopes",a.w);return{code:b,grantType:c,redirectUri:d,scopes:a}}function ec(a){this.accessToken=a.accessToken;this.H=a.H}function Zb(a){return new ec({accessToken:B.required("accessToken",a),H:B.optional("refreshToken",a)})}function Xb(a){this.email=a.email;this.H=a.H;this.accessToken=a.accessToken}
function ac(a){return{type:"GOOGLE",accessToken:D.required("accessToken",a.accessToken),refreshToken:D.required("refreshToken",a.H)}}function bc(a){this.redirect=a.redirect};function fc(a){a=a||{};soy.asserts.assertType(null==a.v||a.v instanceof goog.soy.data.SanitizedContent||goog.isString(a.v),"cssClass",a.v,"null|string|undefined");a=a.v;return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg "+(a?'class\x3d"'+soy.$$escapeHtmlAttribute(a)+'"':"")+' version\x3d"1.2" baseProfile\x3d"tiny" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 100 95.8"\x3e\x3cpath d\x3d"M.4 90.2L46.6 2C48-.7 51.9-.7 53.3 2l46.2 88.2c1.3 2.5-.5 5.5-3.4 5.5H3.8c-2.9.1-4.7-3-3.4-5.5z"/\x3e\x3cpath fill\x3d"#FFF" d\x3d"M45.1 73.7c0-1.6.4-2.8 1.3-3.7.9-.8 2.1-1.2 3.8-1.2 1.6 0 2.8.4 3.7 1.3.9.8 1.3 2.1 1.3 3.6s-.4 2.7-1.3 3.6c-.9.9-2.1 1.3-3.7 1.3s-2.9-.4-3.8-1.3c-.9-.9-1.3-2.1-1.3-3.6zm8.6-9.9h-7l-1.5-28.2h10l-1.5 28.2z"/\x3e\x3c/svg\x3e')}
function gc(a){a=a||{};soy.asserts.assertType(null==a.v||a.v instanceof goog.soy.data.SanitizedContent||goog.isString(a.v),"cssClass",a.v,"null|string|undefined");a=a.v;return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg "+(a?'class\x3d"'+soy.$$escapeHtmlAttribute(a)+'"':"")+' version\x3d"1.2" baseProfile\x3d"tiny" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 100 100"\x3e\x3ccircle cx\x3d"50" cy\x3d"50" r\x3d"50"/\x3e\x3cpath fill\x3d"#FFF" d\x3d"M69.5 25.8l-26 35.4L30.1 54c-3.3-2.1-5.6 2.9-3.8 4.6 1.8 1.7 18.2 16.6 18.2 16.6.5.4 1.2.4 1.7.1.2-.1.4-.3.5-.5 0 0 24.7-40.9 26.9-44.6 2.3-3.8-1.6-7.8-4.1-4.4z"/\x3e\x3c/svg\x3e')}
;function V(a){y("INPUT"===a.j.get(0).tagName,"the view's element must be an input");Backbone.View.call(this,{className:"strengthChecker"});this.ta=a.ta;this.g=a.g;this.bb=this.zxcvbn=null;this.j=a.j;this.va=a.va;this.cb=this.ra=this.da=this.pb=null;this.N=this.N.bind(this);this.Wa=a.Wa||function(){};this.kb=_.debounce(this.N,300);this.Sa=a.Sa||1}v(V,Backbone.View);
V.prototype.render=function(){var a={},b,a=a||{};soy.asserts.assertType(null==a.xa||a.xa instanceof goog.soy.data.SanitizedContent||goog.isString(a.xa),"iconClasses",a.xa,"null|string|undefined");a=a.xa;a=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"strengthChecker__icons"\x3e'+fc({v:soydata.$$markUnsanitizedTextForInternalBlocks("strengthChecker__icon strengthChecker__icon--warning "+(null==(b=a)?"":b))})+gc({v:soydata.$$markUnsanitizedTextForInternalBlocks("strengthChecker__icon strengthChecker__icon--tick "+
(null==(b=a)?"":b))})+'\x3c/div\x3e\x3cdiv class\x3d"strengthChecker__messageSandbox"\x3e\x3c/div\x3e\x3cdiv class\x3d"strengthChecker__message"\x3e\x3c/div\x3e');this.j.addClass("strengthChecker__input");this.j.attr("data-strength",W);this.$el.html(a.toString());this.$el.attr("data-strength",W);this.pb=this.$(".strengthChecker__icons");this.da=this.$(".strengthChecker__message");this.ra=this.$(".strengthChecker__messageSandbox");hc(this);this.j.on("focus",this.N);this.j.on("input",this.kb);this.j.on("blur",
this.N);this.N()};V.prototype.insert=function(a){a=a||this.j;a.after(this.$el);ic(this)};function ic(a){a.da.css("width","");a.ra.css("width","");a.da.outerWidth(a.j.outerWidth());a.ra.outerWidth(a.j.outerWidth());hc(a)}function hc(a){var b,c,d;b=a.pb.find("svg");c=parseFloat(a.j.css("margin-bottom"));d=a.j.outerHeight()*a.Sa;b.outerHeight(d);b.outerWidth(d);b.css("top",-c);a.da.css("margin-bottom",c)}
V.prototype.remove=function(){Backbone.View.prototype.remove.call(this);this.j.off("focus",this.N);this.j.off("input",this.kb);this.j.off("blur",this.N)};
V.prototype.N=function(){var a=!this.j.is(":focus");if(this.zxcvbn){var b,c,d;b=this.j.val();0===b.length?b=W:(c=this.va?this.zxcvbn(b,jc(this)):this.zxcvbn(b),b=0===c.score?kc:3>c.score?lc:mc);var e=b;this.j.attr("data-strength",e);this.$el.attr("data-strength",e);b===W||a?this.$el.addClass("strengthChecker--noFeedback"):(a=c,b===mc?(this.bb||(this.bb=_.shuffle([this.g.format("passwordStrengthFeedbackMessage1"),this.g.format("passwordStrengthFeedbackMessage2"),this.g.format("passwordStrengthFeedbackMessage3")])[0]),
a=this.bb):(a=a.feedback,a=(a.warning&&a.warning.length?[a.warning]:[]).concat(a.suggestions),y(!!a.length,"Can't extract feedback from an empty zxcvbn response"),a=a[0],this.cb||(this.cb={"Use a few words, avoid common phrases":Q(this.g),"No need for symbols, digits, or uppercase letters":Q(this.g),"Add another word or two. Uncommon words are better.":this.g.format("passwordStrengthFeedbackMessage5"),"Straight rows of keys are easy to guess":this.g.format("passwordStrengthFeedbackMessage6"),"Short keyboard patterns are easy to guess":lb(this.g),
"Use a longer keyboard pattern with more turns":lb(this.g),'Repeats like "aaa" are easy to guess':this.g.format("passwordStrengthFeedbackMessage8"),'Repeats like "abcabcabc" are only slightly harder to guess than "abc"':this.g.format("passwordStrengthFeedbackMessage9"),"Avoid repeated words and characters":Q(this.g),"Sequences like abc or 6543 are easy to guess":this.g.format("passwordStrengthFeedbackMessage10"),"Avoid sequences":Q(this.g),"Recent years are easy to guess":mb(this.g),"Avoid recent years":mb(this.g),
"Avoid years that are associated with you":mb(this.g),"Dates are often easy to guess":nb(this.g),"Avoid dates and years that are associated with you":nb(this.g),"This is a top-10 common password":Q(this.g),"This is a top-100 common password":Q(this.g),"This is a very common password":Q(this.g),"This is similar to a commonly used password":Q(this.g),"A word by itself is easy to guess":Q(this.g),"Names and surnames by themselves are easy to guess":ob(this.g),"Common names and surnames are easy to guess":ob(this.g),
"Capitalization doesn't help very much":Q(this.g),"All-uppercase is almost as easy to guess as all-lowercase":Q(this.g),"Reversed words aren't much harder to guess":Q(this.g),"Predictable substitutions like '@' instead of 'a' don't help very much":Q(this.g)}),a=this.cb[a],z(a,"Unknown zxcvbn message")),d=a,nc(this,d));this.Wa({ab:b,message:d})}};
function jc(a){z(a.va,"userInputSelector must be defined");a=a.va.toArray().map(function(a){return $(a).val()});var b=/[s@.]+/,c=a.map(function(a){return a.split(b)}).filter(function(a){return 1<a.length});return a.concat.apply(a,[].concat(u(c))).filter(function(a){return 0!=a.length})}function nc(a,b){a.ra.text(b);oa(function(){a.da.outerHeight(a.ra.outerHeight());a.da.text(b);a.$el.removeClass("strengthChecker--noFeedback")})}function oc(a,b){a.$el.toggleClass("strengthChecker--noIcons",!b)}
var W=0,kc=1,lc=2,mc=3;function X(a){var b={};Backbone.View.call(this,{el:a.el,events:_.extend({},a.events,(b["blur .js-form__input"]=function(a){pc(this,$(a.currentTarget))},b.submit=function(a){this.Aa(a)},b))})}v(X,Backbone.View);
function pc(a,b){var c,d,e;c=b.get(0);e=b.siblings(".form__inputMessage");d=b.attr("name");c.setCustomValidity("");b.removeClass("form__input--withError");c.validity.valid||(c.validity.valueMissing?c.setCustomValidity(a.Pa(d)):c.validity.typeMismatch?c.setCustomValidity(a.Qa(d)):c.validity.patternMismatch&&c.setCustomValidity(a.Oa(d)),b.addClass("form__input--withError"),b.one("input",function(){return b.removeClass("form__input--withError")}),e.text(c.validationMessage))}
X.prototype.Aa=function(a){var b=!1;this.el.checkValidity()?(this.$(".js-form__input").prop("readonly",!0),this.$(".js-form__submitButton").prop("disabled",!0)):(a.preventDefault(),a=this.$(".js-form__input:invalid").first(),pc(this,a),a.focus(),b=!0);return b};X.prototype.Pa=function(){throw Error("Unhandled error");};X.prototype.Qa=function(){throw Error("Unhandled error");};X.prototype.Oa=function(){throw Error("Unhandled error");};function Y(a){var b={};X.call(this,{el:a.el,events:(b.submit=function(a){this.Aa(a)},b)});this.l=a.l;this.i=a.i;this.$a=0}v(Y,X);
Y.prototype.Pa=function(a){switch(a){case "displayName":a=this.i.format("signupFullNameRequiredInlineErrorMessage");break;case "email":a=this.i.format("signupEmailRequiredInlineErrorMessage");break;case "emailConfirmation":a=this.i.format("signupConfirmEmailRequiredInlineErrorMessage");break;case "password":a=this.i.format("signupPasswordRequiredInlineErrorMessage");break;default:a=X.prototype.Pa.call(this,a)}return a};
Y.prototype.Qa=function(a){return"email"===a||"emailConfirmation"==a?this.i.format("signupEmailInvalidFormatInlineErrorMessage"):X.prototype.Qa.call(this,a)};Y.prototype.Oa=function(a){switch(a){case "emailConfirmation":a=this.i.format("signupConfirmEmailMatchInlineErrorMessage");break;case "password":a=this.i.format("signupPasswordMinLengthInlineErrorMessage");break;default:a=X.prototype.Oa.call(this,a)}return a};
Y.prototype.Aa=function(a){a=!X.prototype.Aa.call(this,a);this.$a++;this.l.track("signup_submitted",{method:"email",attempts:this.$a,hasErrors:!a});return a};
function qc(a){var b={};Backbone.View.call(this,{el:a.el,events:(b["click .js-signupForm__buttonEmail"]=function(){$(document).trigger("forceDirtyInputCheck");rc(this);this.$(".signupForm__signupButtons").addClass("fadeTransitionContent--animateCollapse");this.$(".signupForm__above").addClass("fadeTransitionContent--animateCollapse");this.$(".signupForm__below .form__footButtons").addClass("fadeTransitionContent--animateExpand");this.$(".signupForm__emailForm").addClass("fadeTransitionContent--animateExpand");
this.$el.removeClass("signupForm--collapsed");this.$el.removeClass("signupForm--notransitions");this.$(".js-form__input[name\x3ddisplayName]").focus();ic(this.ua)},b["click .js-form__footButton"]=function(a){sc(this,a)},b["click .js-signupForm__logo"]=function(a){sc(this,a)},b["change .js-form__input[name\x3demail]"]=function(a){a=$(a.currentTarget).val();a=a.replace(/[\/\\^$*+?.()|[\]{}]/g,"\\$\x26");this.$(".js-form__input[name\x3demailConfirmation]").attr("pattern",a)},b["blur .js-form__input[name\x3dpassword]"]=
function(a){oc(this.ua,a.currentTarget.validity.valid)},b["input .js-form__input[name\x3ddisplayName]"]=function(){this.K.displayName||(this.K.displayName=!0,J(this.l,new K("email_signup_flow_fullname")))},b["input .js-form__input[name\x3demail]"]=function(){this.K.email||(this.K.email=!0,J(this.l,new K("email_signup_flow_email")))},b["input .js-form__input[name\x3demailConfirmation]"]=function(){this.K.mb||(this.K.mb=!0,J(this.l,new K("email_signup_flow_confirm_email")))},b["input .js-form__input[name\x3dpassword]"]=
function(){oc(this.ua,!0);this.K.password||(this.K.password=!0,J(this.l,new K("email_signup_flow_password")))},b)});new Y({el:$(a.el).find(".js-signupForm__form").length?$(a.el).find(".js-signupForm__form"):$(a.el),l:a.l,i:a.i});this.l=a.l;this.ua=a.ua;this.$a=0;this.K={email:!1,mb:!1,displayName:!1,password:!1};this.rb={message:void 0,ab:W};this.ha=a.ha}v(qc,Backbone.View);qc.prototype.start=function(){tc(this);this.l.track("signup_form_loaded",{pageVariant:this.ha})};
function tc(a){var b=a.$("#analyticsId"),c=b.val();c?a.l.identify(c,null):La(a.l,function(){var c=a.l.Ma();c&&b.val(c)})}function rc(a){a=a.$(".fadeTransitionContent");a.removeClass("fadeTransitionContent--animateCollapse");a.removeClass("fadeTransitionContent--animateExpand")}
function sc(a,b){a.$el.hasClass("signupForm--collapsed")||(b.preventDefault(),a.$(".js-form__input").removeClass("form__input--withError").val(""),a.$(".js-signupForm__errors").empty(),rc(a),a.$(".signupForm__signupButtons").addClass("fadeTransitionContent--animateExpand"),a.$(".signupForm__below .form__footButtons").addClass("fadeTransitionContent--animateCollapse"),a.$(".signupForm__above").addClass("fadeTransitionContent--animateExpand"),a.$(".signupForm__emailForm").addClass("fadeTransitionContent--animateCollapse"),
a.$el.addClass("signupForm--collapsed"))};function uc(){return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg class\x3d"feedbackAlert__icon" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 24 24"\x3e\x3cpath d\x3d"M12,2 C17.52,2 22,6.48 22,12 C22,17.52 17.52,22 12,22 C6.48,22 2,17.52 2,12 C2,6.48 6.48,2 12,2 Z M12,3.33333333 C7.21637967,3.33333333 3.33333333,7.21637967 3.33333333,12 C3.33333333,16.7836203 7.21637967,20.6666667 12,20.6666667 C16.7836203,20.6666667 20.6666667,16.7836203 20.6666667,12 C20.6666667,7.21637967 16.7836203,3.33333333 12,3.33333333 Z M13,17 L11,17 L11,11 L13,11 L13,17 Z M13,9 L11,9 L11,7 L13,7 L13,9 Z" transform\x3d"rotate(180 12 12)"/\x3e\x3c/svg\x3e')}
goog.DEBUG&&(uc.Tb="FeedbackTemplates.warningIcon");function vc(a){this.$el=a}vc.prototype.remove=function(){this.$el.remove()};function wc(a,b){this.$el=a;this.R=b}v(wc,vc);wc.prototype.remove=function(){if(this.R){this.R.removeClass("globalFeedbackAlertContainer");this.R.css("padding-top","");var a=parseFloat(this.R.data("gcpt"));a&&this.R.css("padding-top",a);this.R.removeData("gcpt")}vc.prototype.remove.call(this)};var xc={v:"feedbackAlert--danger",Bb:uc};function yc(a){var b={};Backbone.View.call(this,{el:a.el,events:(b["click .js-socialAuth__facebookButton"]=function(a){zc(this,a)},b["click .js-socialAuth__googleButton"]=function(a){Ac(this,a)},b)});this.ba=a.ba;this.pa=a.pa;this.i=a.i;this.mode=a.mode;this.jb=a.jb;this.Da=this.$(".socialAuth__alerts");this.nb=!1}v(yc,Backbone.View);
yc.prototype.start=function(){var a=this,b,c;b=this.$(".js-socialAuth__facebookButton");c=this.$(".js-socialAuth__googleButton");b.prop("disabled",!0);this.ba.init().then(function(){return b.prop("disabled",!1)}).catch(function(c){if(!c.currentTarget||"script"!==c.currentTarget.localName)throw c;a.nb=!0;b.prop("disabled",!1)});c.prop("disabled",!0);this.pa.load().then(function(){return c.prop("disabled",!1)})};
function Bc(a){a.hasClass("buttonSpinner")||(a.addClass("buttonSpinner"),a.append('\x3cdiv class\x3d"spinner"/\x3e'))}function Cc(a){a.hasClass("buttonSpinner")&&(a.find(".spinner").remove(),a.removeClass("buttonSpinner"))}
function zc(a,b){Dc(a);a.nb?(Ec(a,xc,a.i.format("authFacebookSdkInitError","https://support.canva.com/troubleshooting/logging-in/")),$(b.currentTarget).prop("disabled",!0)):(Bc($(b.currentTarget)),Fb(a.ba).then(function(){return Fc(a)}).catch(function(){Z(a,a.i.format("signupLoginFacebookPermissionsFailure"))}))}
function Fc(a){Eb(a.ba).then(function(b){return Gc(a,b)}).catch(function(b){"EMAIL_NOT_VERIFIED"===b?Z(a,a.i.format("signupLoginUnverifiedFacebookEmailAddress")):Z(a,a.i.format("signupLoginFacebookSignInFailure"))})}
function Gc(a,b){Bb(a.ba).then(function(a){var b=(new UAParser).getResult().browser;"Safari"!==b.name||"8"!==b.major||"DESIGN_BUTTON"!==window.analyticsConfig.experience?window.location.href=window._loginRedirect||a.redirect:window.location.reload()}).catch(function(c){if(a.mode===Hc){c=a.$el.data("csrf-token");var d=b.accessToken,e=b.Na(),f=a.$el.data("signup-redirect"),g=a.$el.data("referrer");soy.asserts.assertType(goog.isString(c)||c instanceof goog.soy.data.SanitizedContent,"csrfToken",c,"string|goog.soy.data.SanitizedContent");
soy.asserts.assertType(goog.isString(d)||d instanceof goog.soy.data.SanitizedContent,"facebookToken",d,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(e)||e instanceof goog.soy.data.SanitizedContent,"email",e,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(null==f||f instanceof goog.soy.data.SanitizedContent||goog.isString(f),"signupRedirect",f,"null|string|undefined");soy.asserts.assertType(null==g||g instanceof goog.soy.data.SanitizedContent||goog.isString(g),
"referrer",g,"null|string|undefined");c=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cform action\x3d"/signup" method\x3d"post" class\x3d"socialAuth__auxiliaryForm"\x3e'+(f?'\x3cinput id\x3d"signupRedirect" name\x3d"signupRedirect" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(f)+'"\x3e':"")+(g?'\x3cinput id\x3d"referrer" name\x3d"referrer" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(g)+'"\x3e':"")+'\x3cinput name\x3d"csrfToken" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(c)+
'"\x3e\x3cinput name\x3d"authMode" type\x3d"hidden" value\x3d"facebook"\x3e\x3cinput name\x3d"facebookToken" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(d)+'"\x3e\x3cinput name\x3d"email" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(e)+'"\x3e\x3c/form\x3e');c=$(c.toString());$("body").append(c);c.submit()}else{d=a.i;if(c instanceof qb)c=d.format("authFacebookSignInFailed");else if(c instanceof rb)c=d.format("authTrySigningUpFirst");else throw Error("unrecognised FacebookServiceError");
Z(a,c)}})}function Ac(a,b){Dc(a);Bc($(b.currentTarget));a.pa.Ha().then(function(b){return Ic(a,b)}).catch(function(b){Z(a,Hb(a.i,b))})}
function Ic(a,b){a.pa.Fa(b).then(function(a){window.location.href=window._loginRedirect||a.redirect}).catch(function(c){if(a.mode===Hc){c=z(b.email,"missing email");z(b.H,"missing refreshToken");var d=a.$el.data("csrf-token"),e=b.H,f=b.accessToken,g=a.$el.data("signup-redirect"),h=a.$el.data("referrer");soy.asserts.assertType(goog.isString(d)||d instanceof goog.soy.data.SanitizedContent,"csrfToken",d,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(f)||f instanceof goog.soy.data.SanitizedContent,
"googleAccessToken",f,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(e)||e instanceof goog.soy.data.SanitizedContent,"googleRefreshToken",e,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(c)||c instanceof goog.soy.data.SanitizedContent,"email",c,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(null==g||g instanceof goog.soy.data.SanitizedContent||goog.isString(g),"signupRedirect",g,"null|string|undefined");soy.asserts.assertType(null==
h||h instanceof goog.soy.data.SanitizedContent||goog.isString(h),"referrer",h,"null|string|undefined");c=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cform action\x3d"/signup" method\x3d"post" class\x3d"socialAuth__auxiliaryForm"\x3e'+(g?'\x3cinput id\x3d"signupRedirect" name\x3d"signupRedirect" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(g)+'"\x3e':"")+(h?'\x3cinput id\x3d"referrer" name\x3d"referrer" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(h)+'"\x3e':"")+'\x3cinput name\x3d"csrfToken" type\x3d"hidden" value\x3d"'+
soy.$$escapeHtmlAttribute(d)+'"\x3e\x3cinput name\x3d"authMode" type\x3d"hidden" value\x3d"google"\x3e\x3cinput name\x3d"googleAccessToken" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(f)+'"\x3e\x3cinput name\x3d"googleRefreshToken" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(e)+'"\x3e\x3cinput name\x3d"email" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(c)+'"\x3e\x3c/form\x3e');c=$(c.toString());$("body").append(c);c.submit()}else Z(a,Hb(a.i,c))})}
function Ec(a,b,c){var d=a.Da.width();a.Da.width(d).toggleClass("socialAuth__alerts--visible",!0);var e={type:b,message:soydata.VERY_UNSAFE.ordainSanitizedHtml(c),yb:"socialAuth__alert",Ib:!1,small:!0};y(!(e.global^0),"$globalContainer is required for global alerts");b=e.type.Bb();c=e.type.v;var d=e.yb,f=e.global,g=e.message,h=e.Sb,l=e.small,k=e.title,e=e.Ib;soy.asserts.assertType(g instanceof soydata.SanitizedHtml||g instanceof soydata.UnsanitizedText||goog.isString(g),"message",g,"soydata.SanitizedHtml");
soy.asserts.assertType(goog.isString(c)||c instanceof goog.soy.data.SanitizedContent,"alertClass",c,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(b instanceof soydata.SanitizedHtml||b instanceof soydata.UnsanitizedText||goog.isString(b),"iconHtml",b,"soydata.SanitizedHtml");soy.asserts.assertType(null==h||goog.isBoolean(h)||1===h||0===h,"showDismiss",h,"boolean|null|undefined");soy.asserts.assertType(null==k||k instanceof soydata.SanitizedHtml||k instanceof soydata.UnsanitizedText||
goog.isString(k),"title",k,"?soydata.SanitizedHtml|string|undefined");soy.asserts.assertType(null==d||d instanceof goog.soy.data.SanitizedContent||goog.isString(d),"classes",d,"null|string|undefined");soy.asserts.assertType(null==f||goog.isBoolean(f)||1===f||0===f,"global",f,"boolean|null|undefined");soy.asserts.assertType(null==e||goog.isBoolean(e)||1===e||0===e,"withIcon",e,"boolean|null|undefined");soy.asserts.assertType(null==l||goog.isBoolean(l)||1===l||0===l,"small",l,"boolean|null|undefined");
e=null==e?!0:e;b=""+('\x3cdiv class\x3d"feedbackAlert '+soy.$$escapeHtmlAttribute(c)+(f?" feedbackAlert--global":"")+(e?" feedbackAlert--withIcon":"")+(h?" feedbackAlert--dismissible":"")+(l?" feedbackAlert--small":"")+(d?" "+soy.$$escapeHtmlAttribute(d):"")+'"\x3e\x3cdiv class\x3d"feedbackAlert__message"\x3e\x3cdiv class\x3d"feedbackAlert__iconContainer"\x3e'+(e?soy.$$escapeHtml(b):"")+"\x3c/div\x3e"+(k?'\x3cstrong class\x3d"feedbackAlert__title"\x3e'+soy.$$escapeHtml(k)+"\x3c/strong\x3e ":"")+'\x3cdiv class\x3d"feedbackAlert__messageBody"\x3e'+
soy.$$escapeHtml(g)+"\x3c/div\x3e\x3c/div\x3e"+(h?'\x3cbutton type\x3d"button" class\x3d"feedbackAlert__closeButton"\x3e'+soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"24" height\x3d"24" viewBox\x3d"0 0 24 24"\x3e\x3cpolygon points\x3d"19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12"/\x3e\x3c/svg\x3e')+"\x3c/button\x3e":"")+"\x3c/div\x3e");b=soydata.VERY_UNSAFE.ordainSanitizedHtml(b);b=$(b.toString());
y(b.hasClass("feedbackAlert"),'$el must have "feedbackAlert" in its classList');y(!b.hasClass("feedbackAlert--global")||!1,"$globalContainer must only be used with global alerts");(new wc(b,void 0)).$el.appendTo(a.Da)}function Z(a,b){a.$(".js-socialAuth__error").text(b).addClass("socialAuth__error--show");Cc(a.$(".js-socialAuth__facebookButton"));Cc(a.$(".js-socialAuth__googleButton"))}function Dc(a){a.$(".js-socialLogin__error").removeClass("socialAuth__error--show")}var Hc="loginAndSignup";$(function(){var a=new bb(window.httpServiceConfig);if(!window.cmsg)throw Error("window['cmsg'] isn't defined");var b=new hb,c=$a(),d=new wa(ra(window.cflags)),e=window.signupConfig,e=e?{ha:B.required("pageVariant",e)}:{ha:""},f=null;try{if(window.localStorage)f=new Pb(window.localStorage,void 0);else throw Error("ClientStore: localStorage is not defined on window, likely an unsupported browser");}catch(k){}var g=new R({config:new Gb,G:a,Ua:new vb(a)}),a=new Qb({config:dc(),G:a,X:f}),f=$(".js-strengthChecker__input");
b.g||(b.g=new kb(b.config));var h=new V({Sa:.75,Wa:function(a){a.message&&!_.isEqual(a,l.rb)&&(l.rb=a,a.ab===kc?J(l.l,Qa(new K("email_signup_flow_amber_alert"),a.message)):a.ab===lc&&J(l.l,Qa(new K("email_signup_flow_yellow_alert"),a.message)))},j:f,ta:na,g:b.g,va:$(".js-strengthChecker__userInput")});h.render();h.insert($(".form__inputContainer--last"));(window.hasOwnProperty("zxcvbn")?P.resolve():P.resolve($.ajax({dataType:"script",cache:!0,url:"https://static.canva.com/static/lib/zxcvbn-4.2.0.min.js"})).return()).then(function(){h.zxcvbn=
window.zxcvbn});var l=new qc({el:".js-signupForm",l:c,i:ib(b),ua:h,ha:e.ha});l.start();(new yc({el:".js-signupForm__socialAuth",ba:g,pa:a,i:ib(b),mode:Hc,jb:la})).start();(function(){$(".js-signupForm .js-socialAuth__facebookButton").click(function(){Pa(c,"signup","collapsed",{auth_mode:"facebook"})});$(".js-signupForm .js-socialAuth__googleButton").click(function(){Pa(c,"signup","collapsed",{authmode:"google"})});$(".js-signupForm__buttonEmail").click(function(){Pa(c,"signup","collapsed",{authmode:"email"})})})();
(function(){c.Ma().then(function(a){d.get(new pa)>function(a){for(var b=0,c=0;c<a.length;c++)b+=a.charCodeAt(c);return b%100}(a)&&1===$(".signupForm__signupProfession").length&&(c.track("exp_signup_onboarding_loaded"),$(".signupForm__signupProfession").show(),$(".signupForm__signupButtons").hide(),$(".signupForm__signupProfessionButton").click(function(a){a=$(a.target).data("professionType");Pa(c,"exp_signup_onboarding_selected","",{profession_type:a});"personal"!==a&&$(".js-socialAuth__facebookButton").hide();
"education"===a?$("#email").parent().find(".form__label").text("Your Education Email"):"business"!==a&&"enterprise"!==a||$("#email").parent().find(".form__label").text("Your Work Email");$(".signupForm__signupProfession").hide();$(".signupForm__signupButtons").show()}))})})()});})();
